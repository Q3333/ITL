# Linux 3일차



### 2일차 복습



배시 셸의 한 줄의 문자열 출력 : echo
배시 셸의 한 줄의 문자열을 %지시자와 \문자를 이용하여  출력 형식을 지정 :  printf

-표준입력 파일 디스크립터 stdin   0
-표준출력 파일 디스크립터 stdout  1
-표준오류 파일 디스크립터 stderr  2

출력 리다이렉션 : > 기존 파일의 내용을 삭제하고 새로 결과를 저장
ls -l > ls.out

출력 리다이렉션 : >> 기존 파일의 내용 뒤에 추가 저장

입력 리다이렉션
ls -l <  ls.in





셸 변수 : 현재 셸에서만 사용 가능, 서브 셸로는 전달되지 않음
환경 변수 :  현재 셸에서 사용 가능, 서브 셸로로 전달 가능
set : 셸 변수, 환경 변수 모두 출력
환경 변수만  출력 : env

환경변수 종류 : HISTSIZE , HOME, LANG, PATH, PWD, SHELL,...

셸변수 정의 (설정) : 변수명=문자열
정의된 셸변수를 환경변수로 설정 : export 변수명=문자열, export 변수명
환경변수를 다시 셸변수로 바꾸려면 : export -n





기존 명령을 대신해서 다른 이름을 붙여서 사용하려면  : alias 이름='명령'
alias 설정 해제 : unalias





사용자가 이전에 입력한 명령을 다시 불러와서 사용하려면 : history

바로 직전에 사용했었던 명령을 재실행하려면  !!

히스토리에서 해당 번호의 명령을 재실행하려면 !번호

히스토리에서 문자열로 시작하는 명령중에서 마지막에 실행된 명령을  재실행하려면 !문자열





배시셸에서 시스템 환경 설정 파일 :
/etc/profile  - 모든 셸에 공통으로 적용되는 환경 설정 , bash.bashrc 파일을 실행시킴
/etc/bash.bashrc - 기본 프롬프트 설정, 시스템 공통으로 적용되는 환경 설정
/etc/profile.d/*.sh - 언어나 명령별로 필요한 환경을 설정





배시셸에서 사용자의 환경 설정 파일 :
~/.profile  : 사용자가 정의하는 환경 설정, .bashrc 파일을 실행시킴
~/.bashrc  : 히스토리의 크기 설정, alias 설정 , 함수 설정
~/.bash_aliases : 사용자가 정의한 alias를 별도 파일로 저장
~/.bash_logout : 로그아웃할때 필요한 함수들을 설정





ls -l 옵션으로 출력 내용

-또는 d 는 파일의 종류
rwxrwxrwx 는 소유자의 파일 접근 권한, 소유자가 속한 그룹의 파일 접근 권한, 다른 사용자들의 파일 접근 권한
하드링크 개수
소유자 ID
소유자의 그룹 이름
파일 크기
파일이 마지막 수정된 날짜와 시간
파일명





파일 접근 권한 변경 : chmod

하위 디렉토리까지 파일 접근 권한 변경 : chmod -R

기호 모드 : +, -, r, w, x  

숫자 모드 : chmod 777 , chmod 644,...





기본 접근 권한 확인 : umask

기본 접근 권한 변경 : umask

기본 접근 권한 변경 umask는 파일이나 디렉토리 생성 시 부여하지 않을 권한을 지정함





특수 접근 권한 : SetUID, SetGID, sticky bit

SetUID는 맨 앞자리가 4로 설정됨

SetUID는 해당 파일이 실행되는 동안에는 파일을 실행한 사용자 권한이 아니라 파일 소유자의 권한으로 실행 

SetUID는 소유자의 실행 권한에 's'로 표시됨



SetGID는 해당 파일이 실행되는 동안에는 파일을 실행한 사용자 권한이 아니라 파일 소유자의 그룹 권한으로 실행 

SetUID는 맨 앞자리가 2로 설정됨



sticky bit는 디렉토리에 설정

sticky bit는 맨 앞자리가 1로 설정됨

sticky bit가 설정된 디렉토리에는 누구나 파일을 생성 가능, 다른 사용자가 생성한 파일은 삭제 불가  (ex: /tmp)





데몬 프로세스 : 특정 서비스를 제공하기 위해 존재, 리눅스 커널에 의해 실행
고아 프로세스 : 자식 프로세스가 아직 실행 중인데 부모 프로세스가 먼저 종료된 프로세스
좀비 프로세스 : 자식 프로세스가 종료했는데도 프로세스 테이블 목록에 남아 있는 경우  (defunct 프로세스로 출력됨)





현재 실행 중인 프로세스의 목록을 보는 명령 : ps 
현재 실행 중인 프로세스의 상세 정보 출력 : -f
UID, PID, PPID, C, STIME, TTY, TIME, CMD
터미널에서 실행한 프로세스의 정보 출력 : -a

STAT  필드 : 
현재 실행 중인 프로세스의 메모리 사용량 출력 : u옵션
%CPU, %MEM , VSZ, RSS...



실행중인 특정 프로세스 정보 검색 : pgrep
프로세스 강제 종료 : kill [-시그널] pid
pkill 프로세스이름으로 강제 종료



현재 실행중인 모든 작업을 보려면 : jobs

백그라운드, 포그라운드 작업 
ctrl+z 
stop %작업번호
bg %작업번호
fg %작업번호



특정 시간에 작업을 한번만 수행하도록 예약 : at [옵션] 시간
at 12pm + 2 days
at 12am tomorrow

정해진 시간에 작업을 반복적으로 수행하도록 예약 : crontab
분 시 일 월 요일  작업내용 







## 리눅스 파일 시스템의 종류





#### **파일 시스템**

파일과 디렉터리의 집합을 구조적으로 관리하는 체계

어떤 구조를 구성하여 파일이나 디렉터리를 관리하느냐에 따라 다양한 형식의 파일 시스템이 존재



#### **리눅스** **고유의 디스크 기반 파일** **시스템**



##### ext(ext1)

•Extended File System’의 약자로  1992년 4월 리눅스 0.96c에 포함되어 발표

•파일 시스템의 최대 크기는 2GB, 파일 이름의 길이는 255바이트까지 지원

•inode 수정과 데이터의 수정 시간 지원이 안 되고, 파일 시스템이 복잡해지고 파편화되는 문제

•현재 리눅스에서는 ext 파일 시스템을 사용하지 않음



##### ext2

•ext 파일 시스템이 가지고 있던 문제를 해결하고, 1993년 1월 발표

•ext2는 ext3 파일 시스템이 도입되기 전까지 사실상 리눅스의 표준 파일 시스템으로 사용

•이론적으로 32TB까지 가능



##### ext3

•ext3는 ext2를 기반으로 개발되어 호환이 가능하며 2001년 11월 공개

•ext3의 가장 큰 장점은 저널링(journaling) 기능을 도입 복구기능 강화

• 파일 시스템의 최대 크기는 블록의 크기에 따라 2~32TB까지 지원

※ 저널링 :  파일시스템의 업데이트 내용을 기록한 것.



##### ext4

•ext4 파일 시스템은 1EB(엑사바이트, 1EB=1,024×1,024TB) 이상의 볼륨과 16TB 이상의 파일을 지원

•ext2 및 ext3와 호환성을 유지하며 2008년 12월 발표



##### XFS

•eXtended File System의 약자

•1993년 실리콘그래픽스가 개발한 고성능 저널링 파일 시스템. 2000년 5월 GNU GPL로 공개

•2001년 리눅스에 이식되었고 현재 대부분의 리눅스 배포판에서 지원

•XFS는 64bit 파일 시스템으로 최대 16EB까지 지원





※ 디스크 설치부터 생략.







### 파일 아카이브





![1564104618052](<https://github.com/Q3333/ITL/blob/master/Linux/190808/images/a1.PNG>)







![1564104618052](<https://github.com/Q3333/ITL/blob/master/Linux/190808/images/a_c.PNG>)





![1564104618052](<https://github.com/Q3333/ITL/blob/master/Linux/190808/images/a_t.PNG>)





![1564104618052](<https://github.com/Q3333/ITL/blob/master/Linux/190808/images/a_x.PNG>)